name: News Scraper & Sentiment Analysis

on:
  schedule:
    - cron: "0 22 * * *"  # í•œêµ­ ì‹œê°„(KST) ì˜¤ì „ 9ì‹œ (UTC 0ì‹œ) ì‹¤í–‰
  workflow_dispatch:  # ğŸ‘ˆ ìˆ˜ë™ ì‹¤í–‰ ê°€ëŠ¥

jobs:
  scrape_and_commit:
    runs-on: ubuntu-latest
    steps:
      - name: ğŸ“¥ ì €ì¥ì†Œ ê°€ì ¸ì˜¤ê¸°
        uses: actions/checkout@v3
        with:
          # token: ${{ secrets.GITHUB_TOKEN }}  # ğŸ‘ˆ GitHub Actionsì˜ ê¸°ë³¸ ì¸ì¦ ì‚¬ìš©
          token: ${{ secrets.GH_PAT }}  # ğŸ‘ˆ Personal Access Token ì‚¬ìš©

      - name: ğŸ› ï¸ Python í™˜ê²½ ì„¤ì •
        uses: actions/setup-python@v3
        with:
          python-version: "3.8"

      - name: ğŸ“¦ í•„ìš” íŒ¨í‚¤ì§€ ì„¤ì¹˜
        run: pip install -r requirements.txt

      - name: ğŸ“° ë‰´ìŠ¤ í¬ë¡¤ë§ ì‹¤í–‰
        run: python news_scraper.py  # ë‰´ìŠ¤ í¬ë¡¤ë§ ë° ê°ì„± ë¶„ì„ ì‹¤í–‰

      - name: ğŸ“¤ ë³€ê²½ ì‚¬í•­ ì»¤ë°‹ ë° í‘¸ì‹œ
        run: |
          git config --global user.email "sjh75555@naver.com"
          git config --global user.name "wkd-gh"
          git add .
          git commit -m "ğŸ”„ Automated news update" || echo "No changes to commit"
          git push origin main
        env:
          # GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}  # ğŸ‘ˆ ì—¬ê¸° ì¶”ê°€
          GH_PAT: ${{ secrets.GH_PAT }}  # ğŸ‘ˆ Personal Access Token ì‚¬ìš©
